<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Exam Results - Sri Sugatha Dhamma School</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <style>
        body { font-family: 'Poppins', sans-serif; background-color: #f8f9fa; }
        
        /* Result Sheet Styles */
        .result-card {
            display: none; /* Hidden by default */
            background: white;
            border-top: 5px solid #800000;
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }
        .marks-table th { background-color: #f1f1f1; }
        .grade-a { color: #28a745; font-weight: bold; }
        .grade-c { color: #dc3545; font-weight: bold; }
    </style>
</head>
<body>

    <nav class="navbar navbar-expand-lg navbar-dark bg-dark sticky-top">
        <div class="container">
            <a class="navbar-brand d-flex align-items-center gap-3" href="index.html">
                <div class="logo-circle"><img src="logo.png" alt="Logo" class="logo-img"></div>
                <div class="d-flex flex-column">
                    <span class="brand-title">Sri Sugatha Dhamma School</span>
                    <span class="brand-subtitle">Janawasa 10, Buttala</span>
                </div>
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto align-items-center">
                    <li class="nav-item"><a class="nav-link" href="index.html">Home</a></li>
                    <li class="nav-item"><a class="nav-link active" href="results.html">Results</a></li>
                    
                    <li class="nav-item ms-3">
                        <a class="btn btn-outline-warning btn-sm" href="results-si.html">
                            <span style="font-size: 1.2rem; vertical-align: middle;">üá±üá∞</span> Sinhala
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="container mt-5 mb-5">
        <div class="row justify-content-center">
            <div class="col-md-8 text-center animate-text">
                <h2 class="fw-bold mb-3">Check Term Test Results</h2>
                <p class="text-muted">Please enter your Index Number below.</p>
                
                <div class="card p-4 shadow-sm border-0 mt-4">
                    <form onsubmit="checkResult(event)">
                        <div class="input-group input-group-lg">
                            <span class="input-group-text bg-white border-end-0">üîç</span>
                            <input type="text" id="indexNumber" class="form-control border-start-0" placeholder="Ex: 2025001" required>
                            <button class="btn btn-warning fw-bold px-4" type="submit">Search</button>
                        </div>
                    </form>
                    <p id="errorMsg" class="text-danger mt-3 fw-bold" style="display: none;">Invalid Index Number!</p>
                </div>
            </div>
        </div>

        <div class="row justify-content-center mt-5" id="resultSection">
            <div class="col-md-8">
                <div class="card result-card p-4 animate-text" id="resultCard">
                    
                    <div class="text-center mb-4">
                        <img src="logo.png" width="60" class="mb-3">
                        <h4 class="fw-bold">Final Term Test 2024</h4>
                         <h4 class="fw-bold">Sri Sugatha Dhamma Shchool</h4>
                        <hr>
                        <div class="row text-start mt-4">
                            <div class="col-md-6">
                                <p><strong>Name:</strong> <span id="stName">---</span></p>
                                <p><strong>Grade:</strong> <span id="stGrade">---</span></p>
                            </div>
                            <div class="col-md-6 text-md-end">
                                <p><strong>Index No:</strong> <span id="stIndex">---</span></p>
                                <p><strong>Average:</strong> <span class="badge bg-primary" id="stAvg">---</span></p>
                            </div>
                        </div>
                    </div>

                    <table class="table table-bordered marks-table text-center">
                        <thead>
                            <tr>
                                <th>Subject</th>
                                <th>Score</th>
                                <th>Grade</th>
                            </tr>
                        </thead>
                        <tbody id="marksBody">
                            </tbody>
                    </table>

                    <div class="text-center mt-4">
                        <button onclick="window.print()" class="btn btn-outline-dark btn-sm">üñ®Ô∏è Print Result Sheet</button>
                    </div>

                </div>
            </div>
        </div>
    </div>

    <script>
        // Mock Database (Same data as Sinhala version, translated)
        const database = {
            "2025001": {
                name: "Kasun Perera",
                grade: "Grade 8",
                marks: [
                    { subject: "Buddhist Culture", score: 85, grade: "A" },
                    { subject: "Dhamma Knowledge", score: 78, grade: "A" },
                    { subject: "Pali Language", score: 65, grade: "B" },
                    { subject: "Abhidhamma", score: 90, grade: "A" },
                    { subject: "Meditation", score: 88, grade: "A" }
                ],
                average: "81.2%"
            },
            "2025002": {
                name: "Amaya Nethmi",
                grade: "Grade 6",
                marks: [
                    { subject: "Buddhist Culture", score: 92, grade: "A" },
                    { subject: "Dhamma Knowledge", score: 88, grade: "A" },
                    { subject: "Pali Language", score: 95, grade: "A" },
                    { subject: "Abhidhamma", score: 85, grade: "A" },
                    { subject: "Meditation", score: 90, grade: "A" }
                ],
                average: "90.0%"
            },
            "2025003": {
                name: "Sadeepa Silva",
                grade: "Grade 9",
                marks: [
                    { subject: "Buddhist Culture", score: 45, grade: "C" },
                    { subject: "Dhamma Knowledge", score: 55, grade: "C" },
                    { subject: "Pali Language", score: 60, grade: "B" },
                    { subject: "Abhidhamma", score: 50, grade: "C" },
                    { subject: "Meditation", score: 70, grade: "B" }
                ],
                average: "56.0%"
            }
        };

        function checkResult(event) {
            event.preventDefault(); 
            
            const inputIndex = document.getElementById("indexNumber").value;
            const errorMsg = document.getElementById("errorMsg");
            const resultCard = document.querySelector(".result-card");
            
            if (database[inputIndex]) {
                const student = database[inputIndex];
                errorMsg.style.display = "none";
                resultCard.style.display = "block"; 

                document.getElementById("stName").innerText = student.name;
                document.getElementById("stGrade").innerText = student.grade;
                document.getElementById("stIndex").innerText = inputIndex;
                document.getElementById("stAvg").innerText = student.average;

                const tbody = document.getElementById("marksBody");
                tbody.innerHTML = ""; 

                student.marks.forEach(sub => {
                    let colorClass = sub.grade === "A" ? "grade-a" : (sub.grade === "C" || sub.grade === "S" ? "grade-c" : "");
                    
                    let row = `<tr>
                        <td>${sub.subject}</td>
                        <td>${sub.score}</td>
                        <td class="${colorClass}">${sub.grade}</td>
                    </tr>`;
                    tbody.innerHTML += row;
                });

            } else {
                resultCard.style.display = "none";
                errorMsg.style.display = "block";
            }
        }
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>